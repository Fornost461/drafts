#!/bin/sh

echo '### Use xterm to be able to scroll. ###'

printf 'debug: ~/bin/update: (%s)\n' 'Updating mirror list with reflector.'
sudo reflector --sort score --save /etc/pacman.d/mirrorlist || echo "erreur code ${?} retournée par reflector"

printf 'debug: ~/bin/update: (%s)\n\n' 'Updating packages with pacman.'
if sudo pacman -Syu; then
    printf '\ndebug: ~/bin/update: (%s)\n\n' 'Updating ruby gems.'
    gem update || echo "erreur code ${?} retournée par gem"
else
    echo "erreur code ${?} retournée par pacman"
fi

zsh
