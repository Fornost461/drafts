#!/bin/sh

echo '### Use xterm to be able to scroll. ###'

str='~/bin/_utils/update: (debug) %s\n'

printf "${str}" 'Updating mirror list with reflector.'
sudo reflector --sort score --save /etc/pacman.d/mirrorlist || echo "erreur code ${?} retournée par reflector"

printf "${str}\n" 'Updating packages with pacman.'
if sudo pacman -Syu; then
    printf "\n${str}\n" 'Updating ruby gems.'
    gem update || echo "erreur code ${?} retournée par gem"
else
    echo "erreur code ${?} retournée par pacman"
fi
